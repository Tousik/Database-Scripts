CREATE OR REPLACE FUNCTION FUNC_TRACKER_SAVE_REQUISITION_FABRIC(
	IN v_issue_min_date date,
	IN v_issue_max_date date,
	IN v_transaction_id VARCHAR(100),
	IN v_delivery_min_date date,
	IN v_delivery_max_date date,
	IN v_category_name text,
	IN v_style_code VARCHAR(50),
	IN v_designer_code VARCHAR(20),
	IN v_color_code VARCHAR(10),
	IN v_product_codes VARCHAR(500),
	IN v_item_code VARCHAR(50),
	IN v_production_types VARCHAR(200),
	IN v_fabric_code VARCHAR(50),
	IN v_fabric_name VARCHAR(100),
	IN v_fabric_type VARCHAR(20),
	IN v_fabric_length float,
	IN v_fabric_width float,
	IN v_fabric_shrinkage float,
	IN v_fabric_pcs int,
	IN v_fabric_total_measurement float,
	IN sc_planning_main_item_id int,
	IN style_ccode_id int,
	IN sc_asis_plan_fabric_item_id int,
	IN sc_custom_plan_fabric_item_id int,
	IN sc_custom_dept_plan_fabric_item_id int,
	IN sc_custom char(1),
	IN sc_dept_changed char(1),
	IN v_fabric_unit_std_width float,
    OUT output_msg text,
    OUT id integer)
  RETURNS record AS
$BODY$
BEGIN   
					
		INSERT INTO tracker_requisition_fabric (
		  issue_min_date,
		  issue_max_date,
		  transaction_id,
		  delivery_min_date,
		  delivery_max_date,
		  category_name,
		  style_code,
		  designer_code,
		  color_code,
		  product_codes,
		  item_code,
		  production_types,
		  fabric_code,
		  fabric_name,
		  fabric_type,
		  fabric_length,
		  fabric_width,
		  fabric_shrinkage,
		  fabric_pcs,
		  fabric_total_measurement,
		  sc_planning_main_item_id,
		  style_ccode_id,
		  sc_asis_plan_fabric_item_id,
		  sc_custom_plan_fabric_item_id,
		  sc_custom_dept_plan_fabric_item_id,
		  sc_custom,
		  sc_dept_changed,
			fabric_unit_std_width
		)
		VALUES(			
		$1,
		$2,
		$3,
		$4,
		$5,
		$6,
		$7,
		$8,
		$9,
		$10,
		$11,
		$12,
		$13,
		$14,
		$15,
		$16,
		$17,
		$18,
		$19,
		$20,
		$21,
		$22,
		$23,
		$24,
		$25,
		$26,
		$27,
		$28
		) RETURNING fabric_requisition_id into id;
		output_msg:='Successfully inserted';		
	
END
$BODY$
  LANGUAGE plpgsql;
